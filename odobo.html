<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<!--utils-->
<script type="text/javascript" src="utils.js"></script>
<!--priority queue-->
<script type="text/javascript" src="pq.js"></script>
<!--vec2D-->
<script type="text/javascript" src="vec2D.js"></script>
<!--geom-->
<script>
    var geomPI = 3.14;

</script>
<!--draw-->
<script type="text/javascript" src="draw.js"></script>
<script type="text/javascript" src="polygon.js"></script>
<script type="text/javascript" src="odobo.js"></script>

<div>
    Enter number of vertices:
    <input id="txtNumVerts" type="text" value="6" style="width: 50px;" max="2">
    <input type="button" value="Click to generate polygon" onclick="odobo_Fn();">
    <script>
        var errCreated = null;
        function odobo_Fn()
        {
            var txtNumVerts = document.getElementById('txtNumVerts');
            var numVerts = txtNumVerts.value * 1;
            if ( isNaN(numVerts) || 5 > numVerts || numVerts > 10 )
            {
                if ( errCreated != null ) return;
                var err = document.createElement('div');
                errCreated = err;
                err.style.color = 'red';
                err.appendChild( document.createTextNode('Enter number between 5 and 10') );
                txtNumVerts.parentNode.appendChild( err );
                setTimeout(
                    function()
                    {
                        err.parentNode.removeChild( err );
                        errCreated = null;

                    }, 2000
                );
                return
            }
            odobo_Main( numVerts );


        }
    </script>
</div>
<br>
<canvas id="myCanvas" width="600" height="800"
        style="position: absolute; top: 60px; left: 20px;">
</canvas>

<script>


</script>

<script type="text/javascript">



    var boxesVertical = [], boxesHorizontal = [];
    var tableVertical = document.createElement('table'), tableHorizontal = document.createElement('table');
    document.body.appendChild( tableVertical );
    document.body.appendChild( tableHorizontal );
    function odobo_Main( num )
    {
        var i, j;
        var polygon;
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        polygon = polygon_CreateRandom( num );
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0,0, c.width, c.height);
        ctx.beginPath();

        for ( i = 0; i < boxesVertical.length; i++ )
            document.body.removeChild( boxesVertical[i] );
        for ( i = 0; i < boxesHorizontal.length; i++ )
            document.body.removeChild( boxesHorizontal[i] );
        boxesVertical = [];
        boxesHorizontal = [];

        tableVertical.cellSpacing = 0;
        tableVertical.cellPadding = 0;
        tableHorizontal.cellSpacing = 0;
        tableHorizontal.cellPadding = 0;
        if ( tableVertical.firstChild )
            tableVertical.removeChild( tableVertical.firstChild );
        if ( tableHorizontal.firstChild )
            tableHorizontal.removeChild( tableHorizontal.firstChild );

        tableVertical.style.position = 'absolute';
        tableVertical.style.top = '100px';
        tableVertical.style.left = '400px';

        tableHorizontal.style.position = 'absolute';
        tableHorizontal.style.top = '400px';
        tableHorizontal.style.left = '400px';



        draw_Poly( ctx, polygon );

        var cellArray;
        cellArray = odobo_Slice(polygon, SLICE_VERTICALLY);
        var cell;
        var cellShift;
        var _jSon;
        var span;
        var tr, td;
        tr = document.createElement('tr');
        tableVertical.appendChild( tr );
        for ( i = 0; i < cellArray.length; i++ )
        {

            cell = cellArray[i];
            cellShift = _clone_JSon( cell );
            for ( j = 0; j < cellShift.length; j++ )
                cellShift[j].y += 140;
            draw_Poly( ctx, cellShift );

            _jSon = odobo_CellToJSON( cellShift );
            span = odobo_SpanFromJSon( _jSon, 0, 0 );
            td = document.createElement('td');
            tr.appendChild( td );
            td.appendChild( span );
            td.style.verticalAlign = 'bottom';
            td.style.width = span.style.width;
            td.style.height = span.style.height;
        } // end for

        cellArray = odobo_Slice(polygon, SLICE_HORIZONTALLY);
        for ( i = 0; i < cellArray.length; i++ )
        {
            cell = cellArray[i];
            cellShift = _clone_JSon( cell );
            for ( j = 0; j < cellShift.length; j++ )
                cellShift[j].y += 280;
            draw_Poly( ctx, cellShift );

            _jSon = odobo_CellToJSON( cellShift );
            span = odobo_SpanFromJSon_2( _jSon, 0, 0 );
            document.body.appendChild( span );
            boxesHorizontal.push( span );

        } // end for
    }

</script>
<!--end utils-->

</body>
</html>