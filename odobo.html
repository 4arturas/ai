<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<!--utils-->
<script type="text/javascript" src="utils.js"></script>
<!--priority queue-->
<script type="text/javascript" src="pq.js"></script>
<!--vec2D-->
<script type="text/javascript" src="vec2D.js"></script>
<!--geom-->
<script>
    var geomPI = 3.14;

</script>
<!--draw-->
<script type="text/javascript" src="draw.js"></script>
<script type="text/javascript" src="polygon.js"></script>
<script type="text/javascript" src="odobo.js"></script>

<div>
    Enter number of vertices:
    <input id="txtNumVerts" type="text" value="6" style="width: 50px;" max="2">
    <input type="button" value="Click to generate polygon" onclick="odobo_Fn();">
    <script>
        var errCreated = null;
        function odobo_Fn()
        {
            var txtNumVerts = document.getElementById('txtNumVerts');
            var numVerts = txtNumVerts.value * 1;
            if ( isNaN(numVerts) || 5 > numVerts || numVerts > 10 )
            {
                if ( errCreated != null ) return;
                var err = document.createElement('div');
                errCreated = err;
                err.style.color = 'red';
                err.appendChild( document.createTextNode('Enter number between 5 and 10') );
                txtNumVerts.parentNode.appendChild( err );
                setTimeout(
                    function()
                    {
                        err.parentNode.removeChild( err );
                        errCreated = null;

                    }, 2000
                );
                return
            }
            odobo_Main( numVerts );


        }
    </script>
</div>
<br>
<canvas id="myCanvas" width="300" height="150"
        style="border:1px solid #000000; position: absolute; top: 60px; left: 5px;">
</canvas>

<script>


</script>

<script type="text/javascript">




    var boxesVertical = [], boxesHorizontal = [];
    function odobo_Main( num )
    {
        var i;
        var polygon;
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        polygon = polygon_CreateRandom( num );
        ctx.fillStyle = "#FFFFFF";
        ctx.fillRect(0,0, c.width, c.height);
        ctx.beginPath();

        for ( i = 0; i < boxesHorizontal.length; i++ )
            document.body.removeChild( boxesHorizontal[i] );
        for ( i = 0; i < boxesVertical.length; i++ )
            document.body.removeChild( boxesVertical[i] );
        boxesVertical = [];
        boxesHorizontal = [];

        draw_Poly( ctx, polygon );

        var cellArray;
        var span;
        var _jSon;
        cellArray = odobo_Slice(polygon, SLICE_VERTICALLY);
        var cell;
        for ( i = 0; i < cellArray.length; i++ )
        {

            cell = cellArray[i];
//            draw_Poly( ctx, cell );

            _jSon = odobo_CellToJSON( cell );
            span = odobo_SpanFromJSon( _jSon, -10, 400 );
            document.body.appendChild( span );
            boxesVertical.push( span );
        } // end for

        cellArray = odobo_Slice(polygon, SLICE_HORIZONTALLY);
        for ( i = 0; i < cellArray.length; i++ )
        {
            cell = cellArray[i];
//            draw_Poly( ctx, cell );

            _jSon = odobo_CellToJSON( cell );
            span = odobo_SpanFromJSon( _jSon, 0, 200 );
            document.body.appendChild( span );
            boxesHorizontal.push( span );
        } // end for
    }

</script>
<!--end utils-->

</body>
</html>