<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>
<body>

<script type="text/javascript">
    var data = [
        [6.110100, 17.592000],[5.527700, 9.130200],[8.518600, 13.662000],[7.003200, 11.854000],[5.859800, 6.823300],[8.382900, 11.886000],[7.476400, 4.348300],[8.578100, 12.000000],[6.486200, 6.598700],[5.054600, 3.816600],[5.710700, 3.252200],[14.164000, 15.505000],[5.734000, 3.155100],[8.408400, 7.225800],[5.640700, 0.716180],[5.379400, 3.512900],[6.365400, 5.304800],[5.130100, 0.560770],[6.429600, 3.651800],[7.070800, 5.389300],[6.189100, 3.138600],[20.270000, 21.767000],[5.490100, 4.263000],[6.326100, 5.187500],[5.564900, 3.082500],[18.945000, 22.638000],[12.828000, 13.501000],[10.957000, 7.046700],[13.176000, 14.692000],[22.203000, 24.147000],[5.252400, -1.220000],[6.589400, 5.996600],[9.248200, 12.134000],[5.891800, 1.849500],[8.211100, 6.542600],[7.933400, 4.562300],[8.095900, 4.116400],[5.606300, 3.392800],[12.836000, 10.117000],[6.353400, 5.497400],[5.406900, 0.556570],[6.882500, 3.911500],[11.708000, 5.385400],[5.773700, 2.440600],[7.824700, 6.731800],[7.093100, 1.046300],[5.070200, 5.133700],[5.801400, 1.844000],[11.700000, 8.004300],[5.541600, 1.017900],[7.540200, 6.750400],[5.307700, 1.839600],[7.423900, 4.288500],[7.603100, 4.998100],[6.332800, 1.423300],[6.358900, -1.421100],[6.274200, 2.475600],[5.639700, 4.604200],[9.310200, 3.962400],[9.453600, 5.414100],[8.825400, 5.169400],[5.179300, -0.742790],[21.279000, 17.929000],[14.908000, 12.054000],[18.959000, 17.054000],[7.218200, 4.885200],[8.295100, 5.744200],[10.236000, 7.775400],[5.499400, 1.017300],[20.341000, 20.992000],[10.136000, 6.679900],[7.334500, 4.025900],[6.006200, 1.278400],[7.225900, 3.341100],[5.026900, -2.680700],[6.547900, 0.296780],[7.538600, 3.884500],[5.036500, 5.701400],[10.274000, 6.752600],[5.107700, 2.057600],[5.729200, 0.479530],[5.188400, 0.204210],[6.355700, 0.678610],[9.768700, 7.543500],[6.515900, 5.343600],[8.517200, 4.241500],[9.180200, 6.798100],[6.002000, 0.926950],[5.520400, 0.152000],[5.059400, 2.821400],[5.707700, 1.845100],[7.636600, 4.295900],[5.870700, 7.202900],[5.305400, 1.986900],[8.293400, 0.144540],[13.394000, 9.055100],[5.436900, 0.617050]
    ];

    var indX;
    var depY;

    function gd_Init()
    {
        var y, x;
        var m = data.length;
        indX = new Array( m );
        depY = new Array( m );
        for ( y = 0; y < m; y++ )
        {
            indX[y] = data[y][0];
            depY[y] = data[y][1];
        }

    }
    gd_Init();

    function gd_Prod( v, theta )
    {
        return 1.0 * theta[0] + v * theta[1];
    }

    function gd_ComputeCost( independent, dependent, theta )
    {
        var i;
        var s = 0.0;
        var J;
        var m = independent.length;
        for ( i = 0; i < independent.length; i++ )
        {
            var p = gd_Prod( independent[i], theta ) - dependent[i];
            s = s + Math.pow( p, 2 );
        } // end for
        J = 1.0 / ( 2.0 * m ) * s;
        return J;
    }

    /*
    Matlab
     for i=1:epochs
     hip = X * theta;
     theta0 = theta(1) - alpha/m * sum( (hip-dep_Y) .* 1.0 );
     theta1 = theta(2) - alpha/m * sum( (hip-dep_Y) .* ind_X(1) );
     end;
     */
    function gd_LinearRegression( independent, dependent )
    {
        var numEpochs = 1500;
        var alpha = 0.01;
        var epoch;
        var theta = [0.0, 0.0];
        var m = independent.length;
        var J_hist = new Array( numEpochs );
        for ( epoch = 0; epoch < numEpochs; epoch++ )
        {
            var hip = new Array( m );
            var i;
            for ( i = 0; i < m; i++ )
            {
                hip[i] = gd_Prod( independent[i], theta );
            } // end for i

            var s;
            var s0 = 0.0;
            var s1 = 0.0;
            for ( i = 0; i < m; i++ )
            {
                s = hip[i] - dependent[i];
                s0 += s * 1.0;
                s1 += s * independent[i];
            } // end for i

            var theta0 = theta[0] - alpha/m * s0;
            var theta1 = theta[1] - alpha/m * s1;

            theta = [theta0, theta1];

            J_hist[epoch] = gd_ComputeCost( independent, dependent, theta );
        } // end for

//        for ( i = 1400; i < 1410; i++ )
//            console.log( J_hist[i] );

        console.log( theta[0] );
        console.log( theta[1] );
    }

    gd_LinearRegression( indX, depY );

</script>

</body>
</html>